{% extends "base.html" %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/data/results/difMayor2015bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/diffCouncil2015bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/qarkDiff2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/ase2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/apmi2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/ps2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/ps2013bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pd2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pd2013bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/lsi2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/lsi2013bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pdiu2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pdiu2013bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pr2013.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pr2013bas.geojson') }}"></script>
<script src="{{ url_for('static', filename='js/data/results/pkd2013.geojson' )}}"></script>
<script src="{{ url_for('static', filename='js/data/results/pkd2013bas.geojson' )}}"></script>
<script src="{{ url_for('static', filename='js/data/results/pbdnj2013.geojson' )}}"></script>
<script src="{{ url_for('static', filename='js/data/results/pbdnj2013bas.geojson' )}}"></script>
<script src="{{ url_for('static', filename='js/heatmaptest.json' )}}"></script>
<script src="{{ url_for('static', filename='js/results/diffM2015bas.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/diffC2015bas.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/diff2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/ase2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/apmi2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/ps2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/ps2013bas.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pd2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pd2013bash.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/lsi2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/lsi2013bas.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pdiu2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pdiu2013bash.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pr2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pr2013bash.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pkdsh2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pkdsh2013bas.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pbdnj2013qark.js')}}"></script>
<script src="{{ url_for('static', filename='js/results/pbdnj2013bas.js')}}"></script>
<script>

var diffMayor2015basgeojson;
var diffCouncil2015basgeojson;
var qarkdiff2013geojson;
var ase2013geojson;
var apmi2013geojson;
var ps2013geojson;
var ps2013basgeojson;
var pd2013geojson;
var pd2013basgeojson;
var lsi2013geojson;
var lsi2013basgeojson;
var pdiu2013geojson;
var pdiu2013basgeojson;
var pr2013geojson;
var pr2013basgeojson;
var pkdsh2013geojson;
var pkdsh2013basgeojson;
var pbdnj2013geojson;
var pbdnj2013basgeojson;

var totalVotes = "{{gettext('Total Votes')}}";
var totalSeats = "{{gettext('Total Seats')}}";
var pctVote = "{{gettext('Vote Percentage')}}";
var recVotes = "{{gettext('Votes Received')}}";
var wonSeats = "{{gettext('Seats Won')}}";
var diff = "{{gettext('Difference')}} (+/-)";
var otherVotes = "{{gettext('Other Votes')}}";
var otherSeats = "{{gettext('Other Seats')}}";
var otherPct = "{{gettext('Other Percentage')}}";

//heatmap - json array
//var heat = L.heatLayer(heatData, {
//  radius: 10,
//  maxZoom: 10
  /*
  minOpacity - the minimum opacity the heat will start at
  maxZoom - zoom level where the points reach maximum intensity (as intensity scales with zoom), equals maxZoom of the map by default
  max - maximum point intensity, 1.0 by default
  radius - radius of each "point" of the heatmap, 25 by default
  blur - amount of blur, 15 by default
  gradient - color gradient config, e.g. {0.4: 'blue', 0.65: 'lime', 1: 'red'}
  */
// });

var overlayMaps = {
  "2015 ASHE vs APPD ({{gettext('Mayor')}})": diffMayor2015basgeojson,
  "2015 ASHE vs APPD ({{gettext('Council')}})": diffCouncil2015basgeojson,
  "2013 ASHE vs APMI - Qarku": qarkdiff2013geojson,
  "2013 ASHE - Qarku": ase2013geojson,
  "2013 APMI - Qarku": apmi2013geojson,
  "2013 PS - Qarku": ps2013geojson,
  "2013 PS - Bashkia": ps2013basgeojson,
  "2013 PD - Qarku": pd2013geojson,
  "2013 PD - Bashkia": pd2013basgeojson,
  "2013 LSI - Qarku": lsi2013geojson,
  "2013 LSI - Bashkia": lsi2013basgeojson,
	"2013 PDIU - Qarku": pdiu2013geojson,
  "2013 PDIU - Bashkia": pdiu2013basgeojson,
	"2013 PR - Qarku": pr2013geojson,
  "2013 PR - Bashkia": pr2013basgeojson,
  "2013 PKDSH - Qarku": pkdsh2013geojson,
  "2013 PKDSH - Bashkia": pkdsh2013basgeojson,
  "2013 PBDNJ - Qarku": pbdnj2013geojson,
  "2013 PBDNJ - Bashkia": pbdnj2013basgeojson
  //"Heat": heat
};

map.addLayer(qarkdiff2013geojson);
L.control.layers(baseLayers, null, {collapsed: true, position: 'topright'}).addTo(map);
L.control.layers(overlayMaps, null, {collapsed: false, position: 'bottomleft'}).addTo(map);
legendDiff2013qark.addTo(map);
infoDiff.addTo(map);
var currentLegend = legendDiff2013qark;
var currentInfo = infoDiff;

map.on('baselayerchange', function(eventLayer) {
  if(eventLayer.name === '2013 ASHE vs APMI - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendDiff2013qark;
    legendDiff2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoDiff;
    infoDiff.addTo(map);
  }
  else if(eventLayer.name === '2015 ASHE vs APPD ({{gettext('Council')}})') {
    map.removeControl(currentLegend);
    currentLegend = legendDiff2015C;
    legendDiff2015C.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoDiffC15;
    infoDiffC15.addTo(map);
  }
  else if(eventLayer.name === '2015 ASHE vs APPD ({{gettext('Mayor')}})') {
    map.removeControl(currentLegend);
    currentLegend = legendDiff2015M;
    legendDiff2015M.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoDiffM15;
    infoDiffM15.addTo(map);
  }
  else if(eventLayer.name === '2013 PD - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPD2013qark;
    legendPD2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPD;
    infoPD.addTo(map);
  }

  else if(eventLayer.name === '2013 PD - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPD2013bas;
    legendPD2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoBasPD;
    infoBasPD.addTo(map);
  }
  else if (eventLayer.name === '2013 PBDNJ - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPBDNJ2013qark;
    legendPBDNJ2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPBDNJ;
    infoPBDNJ.addTo(map);
  }
  else if(eventLayer.name === '2013 PBDNJ - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPBDNJ2013bas;
    legendPBDNJ2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPBDNJ2013bas;
    infoPBDNJ2013bas.addTo(map);
  }
  else if (eventLayer.name === '2013 LSI - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendLSI2013qark;
    legendLSI2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoLSI;
    infoLSI.addTo(map);
  }
  else if(eventLayer.name == '2013 LSI - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendLSI2013bas;
    legendLSI2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoLSI2013bas;
    infoLSI2013bas.addTo(map);
  }
  else if (eventLayer.name === '2013 APMI - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendAPMI2013qark;
    legendAPMI2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoAPMI;
    infoAPMI.addTo(map);
  }
  else if(eventLayer.name === '2013 ASHE - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendASE2013qark;
    legendASE2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoASE;
    infoASE.addTo(map);
  }
  else if(eventLayer.name === '2013 PS - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPS2013qark;
    legendPS2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPS;
    infoPS.addTo(map);
  }
  else if(eventLayer.name === '2013 PS - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPS2013bas;
    legendPS2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoBasPS;
    infoBasPS.addTo(map);
  }
  else if(eventLayer.name === '2013 PDIU - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPDIU2013qark;
    legendPDIU2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPDIU;
    infoPDIU.addTo(map);
  }
  else if(eventLayer.name === '2013 PDIU - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPDIU2013bas;
    legendPDIU2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPDIU2013bas;
    infoPDIU2013bas.addTo(map);
  }
  else if(eventLayer.name === '2013 PR - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPR2013qark;
    legendPR2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPR;
    infoPR.addTo(map);
  }
  else if(eventLayer.name === '2013 PR - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPR2013bas;
    legendPR2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPR2013bas;
    infoPR2013bas.addTo(map);
  }
  else if(eventLayer.name === '2013 PKDSH - Qarku') {
    map.removeControl(currentLegend);
    currentLegend = legendPKD2013qark;
    legendPKD2013qark.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPKDSH;
    infoPKDSH.addTo(map);
  }
  else if(eventLayer.name === '2013 PKDSH - Bashkia') {
    map.removeControl(currentLegend);
    currentLegend = legendPKD2013bas;
    legendPKD2013bas.addTo(map);
    map.removeControl(currentInfo);
    currentInfo = infoPKDSH2013bas;
    infoPKDSH2013bas.addTo(map);
  }

})
</script>
{{super()}}
{% endblock %}

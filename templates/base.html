{% extends "bootstrap/base.html" %}

{% block title %}Albania Election Data{% endblock %}

{% block head %}
   <link rel="shortcut icon" href ="{{ url_for('static', filename='img/favicon.ico' )}}">
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato">
   <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
   <script src="http://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"></script>
 {{super()}}
   <style>
   .navbar {
     position: absolute;
     background-color: #000000;
     opacity: 0.5;
     margin-left: 8em;
     z-index: 5;
     font-family: 'Lato';
     border: 3px;
     border-radius: .3em;
   }

   #brand {
     width: 3em;
     height: 2em;
     margin-top: .75em;
     margin-left: -.5em;
     margin-right: .5em;
     z-index: 5;
   }

   #cdo {
     width: 10.5em;
     height: 3.5em;
     margin-left: 2em;

   }

   #logo {
     width: 8em;
     height: 2em;
     /*margin-top: .8em;*/
     z-index: 5;
   }

   .logoholder {
     margin-left: 1.5em;
   }

   #map {
     position: absolute;
     top: 0em;
     /*bottom: -2.5em;*/
     z-index: 3;
     width: 100%;
     height: 100%;
   }

  /*.leaflet-right .leaflet-control {
     margin-right: 10px;
     margin-bottom: 20px;
   }

   .leaflet-left .leaflet-control {
     margin-left: 5em;
     margin-bottom: 15em;
   }*/

   .modal-content {
     font-family: 'Lato';
     color: rgba(0,0,0, 0.7);
   }

   .info {
     font-family: 'Lato';
     color: rgba(0,0,0, 0.7);
     padding-right: 2em;
      /*color: rgba(0,0,0, 0.6);*/
   }
 </style>

{% endblock %}

{% block navbar %}
<div class="navbar navbar-inverse" role="navigation">
    <div class="container">
	<div class="navbar-header" id="navhover">
	    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
		    <span class="icon-bar"></span>
	    </button>
	    <a class="navbar-brand" href="#">{{ _('Albania Election Data') }}</a>
      <img id="brand" src="{{ url_for('static', filename='img/albflag.png' )}}">
	</div>
	<div class="navbar-collapse collapse">
	    <ul class="nav navbar-nav">
    <li><a href="/results">{{ _('Results') }}</a></li>
    <li><a href="/">{{ _('Turnout') }}</a></li>
    <li><a href="#">{{ _('Election') }} 2017</a></li>
    <li><a href='#' data-toggle="modal" data-target="#aboutModal">{{ _('About') }}</a></li>
    <li><a href="#" data-toggle="modal" data-target="#dataModal">{{ _('Data') }}</a></li>
    <!--<li><button class="toggleLang" id="toggleEN">EN</button></li>
    <li><button class="toggleLang" id="toggleAL">SQ</button></li>-->
    <a class="logoholder" href="http://www.zgjedhje.al/" target="_blank"><img id="cdo" src="{{ url_for('static', filename='img/cdologo2.png' )}}"></a>
    <a class="logoholder" href="http://democracyinternational.com" target="_blank"><img id="logo" src="{{ url_for('static', filename='img/dilogo.png' )}}"></a>
	    </ul>
	</div>
    </div>
</div>

{% endblock %}

{% block content %}
<!--about modal -->
<div class="modal fade" id="aboutModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">{{ _('About') }}</h4>
        </div>
        <div class="modal-body">
          {{ _('Albania Election Data is a project to collect, open, visualize and analyze election data on an ongoing basis.
          The project is managed by the Coalition of Domestic Observers (CDO) with support from Democracy International (DI).
          <br>
          <br>The goal of Albania Election Data is to strengthen Albanian democracy through greater transparency, accountability, and inclusivity. CDO and DI aim to achieve this goal by:
          <br>
          <br>1. Creating a centralized hub of election-related data and maps that facilitate evidence-based, data-driven decision-making to improve the electoral process
          <br>
          <br>2. Presenting information in a highly accessible way so that stakeholders can measure progress and identify trends from one election cycle to the next
          <br>
          <br>3. Providing a meaningful lens through which electoral developments or election observation findings can be contextualized and understood') }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{{ _('Close') }}</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--data modal -->
<div class="modal fade" id="dataModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">{{ _('Data') }}</h4>
        </div>
        <div class="modal-body">
          {{ _('The Albania Election Data platform utilizes official election data published the ') }}<a href="http://cec.org.al/sq-al/elections" target="_blank">{{ _('Central Election Commission') }}</a>.
                <br><br>{{ _('Platform data and maps are available for download by the Coalition of Domestic Observers and') }} Democracy International {{ _('via') }} <a href="https://github.com/mbaldassaro/albaniaelectiondata/tree/master/static/js/data" target="_blank">Github</a>.
                {{ _('The data is licensed under ') }}<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC By S.A. 4.0</a>.
                <br><br>{{ _('The map layers are available via ') }}<a href="http://www.openstreetmap.org/about" target="_blank">OpenStreetMap</a>, <a href="https://www.cartodb.com/" target="_blank">Carto</a>, and <a href="https://www.mapbox.com/" target="_blank">Mapbox</a>
              </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">{{ _('Close') }}</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--map-->
<div class="jumbotron" id="map"></div>
<script>
var cartoLink = '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>';
var cartoUrl = 'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png';
var cartoAttr = '&copy; ' + cartoLink;
var mountUrl = 'http://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}';
var mountAttr = 'Tiles &copy; Esri &mdash; Source: Esri';
//var mountUrl = 'http://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}';
//var mountAttr = 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS';
var satUrl = 'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}';
var satAttr = 'Tiles &copy; Esri &mdash; Sources: Esri, DigitalGlobe, Earthstar Geographics, CNES/Airbus DS, GeoEye, USDA FSA, USGS, Getmapping, Aerogrid, IGN, IGP, and the GIS User Community';

var cartoMap = L.tileLayer(cartoUrl, {attribution: cartoAttr});
var mountMap = L.tileLayer(mountUrl, {attribution: mountAttr});
var satMap = L.tileLayer(satUrl, {attribution: satAttr});

var map = L.map('map', {layers: [cartoMap]}).setView([41.2, 20.1], 8);

var baseLayers = {
  "{{gettext('Road')}}": cartoMap,
  "{{gettext('Terrain')}}": mountMap,
  "{{gettext('Satellite')}}": satMap
};

//L.control.layers(baseLayers).addTo(map);

</script>
{% endblock %}
